{"ast":null,"code":"import _slicedToArray from \"/Users/jlc7191/Code/RoadKagaWeb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/jlc7191/Code/RoadKagaWeb/src/components/MessageBox/MessageChildBox.js\";\nimport React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { putMSG, delMSG, putCMSG, putAweCMSGAsync, putBooCMSGAsync, putContentCMSGAsync, delCMSGAsync } from '../../action/Learn2MessageAction';\nimport { ReactComponent as Beard } from \"@svgr/webpack?-svgo,+ref!../../icon/Learn2Message/beard.svg\";\nimport { ReactComponent as Hair } from \"@svgr/webpack?-svgo,+ref!../../icon/Learn2Message/curly-hair.svg\";\nimport { ReactComponent as Hairstyle } from \"@svgr/webpack?-svgo,+ref!../../icon/Learn2Message/hairstyle.svg\";\nimport { ReactComponent as Hairstyle2 } from \"@svgr/webpack?-svgo,+ref!../../icon/Learn2Message/hairstyle2.svg\";\nimport { ReactComponent as Moustache } from \"@svgr/webpack?-svgo,+ref!../../icon/Learn2Message/moustache.svg\";\n\nconst MessageChildBox = props => {\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        edit = _useState2[0],\n        setEdit = _useState2[1];\n\n  const _useState3 = useState(props.cContent),\n        _useState4 = _slicedToArray(_useState3, 2),\n        cmsgContent = _useState4[0],\n        setCMsgContent = _useState4[1]; // 資料處理\n  // 直接把redux的store用變數裝 方便使用\n\n\n  let reduxData = props.cmsgs; // 然後跟傳進來id做比對進而拿到母messageBox的redux資料\n\n  let thisData = reduxData.filter(el => el.cId === props.cId);\n  let thisDataNA = thisData[0] ? thisData[0] : thisData; // 按讚跟噓 完成\n  // 這層直接跟redux溝通\n\n  const cAweClick = () => {\n    // 把他的awesome++\n    thisDataNA.cAwesome++;\n    props.putAweCMSGAsync(thisDataNA);\n  };\n\n  const cBooClick = () => {\n    thisDataNA.cBoo++;\n    props.putBooCMSGAsync(thisDataNA);\n  }; // 子留言刪除 完成\n\n\n  const delClick = () => {\n    let box = document.getElementById('box' + props.cId);\n    box.classList.add('Out');\n    setTimeout(() => {\n      props.delCMSGAsync(thisDataNA.cId);\n    }, 1000);\n  };\n\n  const messageViewEditChange = event => {\n    setCMsgContent(event.target.value);\n  };\n\n  const editClick = () => {\n    if (edit === true) {\n      let newText = document.getElementById('editContentTextarea' + props.cId);\n      thisDataNA.cContent = newText.value;\n      props.putContentCMSGAsync(thisDataNA);\n      setEdit(false);\n    } else {\n      // let editArea = document.getElementById('editContent' + props.id)\n      setEdit(true);\n    }\n  };\n\n  const messageViewEditButtonSave = () => {\n    let newText = document.getElementById('editContentTextarea' + props.cId);\n    thisDataNA.cContent = newText.value;\n    props.putContentCMSGAsync(thisDataNA);\n    setEdit(false);\n  }; // Hover\n\n\n  const aweMouseOver = () => {\n    let changeArea = document.getElementById('awe' + props.cId);\n    changeArea.classList.add('aweOver');\n  };\n\n  const aweMouseOut = () => {\n    let changeArea = document.getElementById('awe' + props.cId);\n    changeArea.classList.remove('aweOver');\n  };\n\n  const booMouseOver = () => {\n    let changeArea = document.getElementById('boo' + props.cId);\n    changeArea.classList.add('booOver');\n  };\n\n  const booMouseOut = () => {\n    let changeArea = document.getElementById('boo' + props.cId);\n    changeArea.classList.remove('booOver');\n  };\n\n  const messageViewEditButtonOver = () => {\n    let editContentBtn = document.getElementById('editContentBtn' + props.cId);\n    editContentBtn.classList.add('Over');\n  };\n\n  const messageViewEditButtonOut = () => {\n    let editContentBtn = document.getElementById('editContentBtn' + props.cId);\n    editContentBtn.classList.remove('Over');\n  };\n\n  const delMouseOver = () => {\n    let changeArea = document.getElementById('delIcon' + props.cId);\n    changeArea.classList.add('Over');\n  };\n\n  const delMouseOut = () => {\n    let changeArea = document.getElementById('delIcon' + props.cId);\n    changeArea.classList.remove('Over');\n  };\n\n  const editMouseOver = () => {\n    let changeArea = document.getElementById('editIcon' + props.cId);\n    changeArea.classList.add('Over');\n  };\n\n  const editMouseOut = () => {\n    let changeArea = document.getElementById('editIcon' + props.cId);\n    changeArea.classList.remove('Over');\n  }; // 大專寫的時間換算\n\n\n  const nowTime = +new Date();\n  const messageTime = props.cTime;\n  let time = nowTime - messageTime;\n  let secondnumber = time / 1000;\n  let minutenumber = time / 60000;\n  let daynumber = time / 86400000;\n  let monthnumber = time / 2592000000;\n  let yearnumber = time / 31104000000; // 秒\n\n  let second = Math.floor(secondnumber % 60); // 分鐘\n\n  let minute = minutenumber % 60 >= 1 ? Math.floor(minutenumber % 60) : ''; // 小時\n\n  let hour = minutenumber / 60 >= 1 ? Math.floor(minutenumber / 60) : ''; // 天\n\n  let day = daynumber % 30 >= 1 ? Math.floor(daynumber % 30) : ''; // 月\n\n  let month = monthnumber % 12 >= 1 ? Math.floor(monthnumber % 12) : ''; // 年\n\n  let year = yearnumber >= 1 ? Math.floor(yearnumber) : '';\n  let showTimeText = year >= 1 && month >= 1 ? year + '年' + month + '個月' : year >= 1 ? year + '年' : month >= 1 ? month + '個月' : day >= 1 ? day + '天' : hour >= 1 ? hour + '小時' : minute >= 1 ? minute + '分鐘' : second + '秒';\n  return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n    id: 'box' + props.cId,\n    className: \"messageViewBoxFeedback\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"messageViewBoxLeft\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"messageViewAvatar\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154\n    },\n    __self: this\n  }, props.cAvatar === 'Beard' ? React.createElement(Beard, {\n    alt: \"logo\",\n    width: \"50px\",\n    height: \"50px\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156\n    },\n    __self: this\n  }) : props.cAvatar === 'Hair' ? React.createElement(Hair, {\n    alt: \"logo\",\n    width: \"50px\",\n    height: \"50px\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158\n    },\n    __self: this\n  }) : props.cAvatar === 'Hairstyle' ? React.createElement(Hairstyle, {\n    alt: \"logo\",\n    width: \"50px\",\n    height: \"50px\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160\n    },\n    __self: this\n  }) : props.cAvatar === 'Hairstyle2' ? React.createElement(Hairstyle2, {\n    alt: \"logo\",\n    width: \"50px\",\n    height: \"50px\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162\n    },\n    __self: this\n  }) : React.createElement(Moustache, {\n    alt: \"logo\",\n    width: \"50px\",\n    height: \"50px\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"messageViewABB\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"aweBooBox\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    id: 'awe' + props.cId,\n    className: \"messageViewAweOrNot\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169\n    },\n    __self: this\n  }, React.createElement(\"i\", {\n    className: \"fas fa-thumbs-up\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170\n    },\n    __self: this\n  }), props.cAwesome), React.createElement(\"div\", {\n    className: \"fakeArea\",\n    onClick: cAweClick,\n    onMouseOver: aweMouseOver,\n    onMouseOut: aweMouseOut,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"aweBooBox\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    id: 'boo' + props.cId,\n    className: \"messageViewAweOrNot\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181\n    },\n    __self: this\n  }, React.createElement(\"i\", {\n    className: \"fas fa-thumbs-down\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182\n    },\n    __self: this\n  }), props.cBoo), React.createElement(\"div\", {\n    className: \"fakeArea\",\n    onClick: cBooClick,\n    onMouseOver: booMouseOver,\n    onMouseOut: booMouseOut,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185\n    },\n    __self: this\n  })))), React.createElement(\"ul\", {\n    className: \"messageViewBoxUL\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194\n    },\n    __self: this\n  }, React.createElement(\"li\", {\n    className: \"ff1 font5 fc1\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195\n    },\n    __self: this\n  }, props.cName, React.createElement(\"small\", {\n    style: {\n      marginLeft: '2px',\n      color: '#999'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197\n    },\n    __self: this\n  }, props.cCompany)), edit === true ? React.createElement(\"div\", {\n    className: \"messageViewEditIng add\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202\n    },\n    __self: this\n  }, React.createElement(\"li\", {\n    id: 'editContent' + props.cId,\n    className: \"ff1 font5 fc3 messageViewBoxContent\",\n    style: {\n      width: '92%'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203\n    },\n    __self: this\n  }, React.createElement(\"textarea\", {\n    id: 'editContentTextarea' + props.cId,\n    onChange: messageViewEditChange,\n    value: cmsgContent,\n    style: {\n      border: 'none',\n      boxShadow: 'none',\n      width: '100%',\n      height: '100%'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    id: 'editContentBtn' + props.cId,\n    className: \"messageViewEditButton\",\n    onClick: messageViewEditButtonSave,\n    onMouseOver: messageViewEditButtonOver,\n    onMouseOut: messageViewEditButtonOut,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220\n    },\n    __self: this\n  }, React.createElement(\"i\", {\n    className: \"far fa-paper-plane\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227\n    },\n    __self: this\n  }))) : React.createElement(\"div\", {\n    className: \"messageViewEditIng\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231\n    },\n    __self: this\n  }, React.createElement(\"li\", {\n    className: \"ff1 font5 fc3 messageViewBoxContent\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232\n    },\n    __self: this\n  }, props.cContent)), React.createElement(\"li\", {\n    className: \"ff1 font6 fc3 messageViewBoxTime\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238\n    },\n    __self: this\n  }, showTimeText, \"\\u524D\"))), React.createElement(\"div\", {\n    className: \"cMessageViewEditDelArea\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    id: 'delIcon' + props.cId,\n    className: \"cMessageViewDelBox\",\n    onClick: delClick,\n    onMouseOver: delMouseOver,\n    onMouseOut: delMouseOut,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242\n    },\n    __self: this\n  }, React.createElement(\"i\", {\n    className: \"fas fa-trash\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    id: 'editIcon' + props.cId,\n    className: \"cMessageViewEditBox\",\n    onClick: editClick,\n    onMouseOver: editMouseOver,\n    onMouseOut: editMouseOut,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251\n    },\n    __self: this\n  }, React.createElement(\"i\", {\n    className: \"fas fa-edit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258\n    },\n    __self: this\n  })))));\n}; // 綁定 redux store\n// 綁定 props.msgs <=> store.msgs\n\n\nconst mapStateToProps = store => ({\n  msgs: store.msgs,\n  cmsgs: store.cmsgs\n}); // 綁定 redux dispatch\n// 第3種，: redux(state)綁定到此元件的props、部份綁定action creator\n// 這個action creator就是上面引入的那個\n\n\nconst mapDispatchToProps = dispatch => bindActionCreators({\n  putMSG,\n  delMSG,\n  putCMSG,\n  putAweCMSGAsync,\n  putBooCMSGAsync,\n  putContentCMSGAsync,\n  delCMSGAsync\n}, dispatch);\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MessageChildBox);","map":{"version":3,"sources":["/Users/jlc7191/Code/RoadKagaWeb/src/components/MessageBox/MessageChildBox.js"],"names":["React","useState","connect","bindActionCreators","putMSG","delMSG","putCMSG","putAweCMSGAsync","putBooCMSGAsync","putContentCMSGAsync","delCMSGAsync","MessageChildBox","props","edit","setEdit","cContent","cmsgContent","setCMsgContent","reduxData","cmsgs","thisData","filter","el","cId","thisDataNA","cAweClick","cAwesome","cBooClick","cBoo","delClick","box","document","getElementById","classList","add","setTimeout","messageViewEditChange","event","target","value","editClick","newText","messageViewEditButtonSave","aweMouseOver","changeArea","aweMouseOut","remove","booMouseOver","booMouseOut","messageViewEditButtonOver","editContentBtn","messageViewEditButtonOut","delMouseOver","delMouseOut","editMouseOver","editMouseOut","nowTime","Date","messageTime","cTime","time","secondnumber","minutenumber","daynumber","monthnumber","yearnumber","second","Math","floor","minute","hour","day","month","year","showTimeText","cAvatar","cName","marginLeft","color","cCompany","width","border","boxShadow","height","mapStateToProps","store","msgs","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport {\n  putMSG,\n  delMSG,\n  putCMSG,\n  putAweCMSGAsync,\n  putBooCMSGAsync,\n  putContentCMSGAsync,\n  delCMSGAsync,\n} from '../../action/Learn2MessageAction'\nimport { ReactComponent as Beard } from '../../icon/Learn2Message/beard.svg'\nimport { ReactComponent as Hair } from '../../icon/Learn2Message/curly-hair.svg'\nimport { ReactComponent as Hairstyle } from '../../icon/Learn2Message/hairstyle.svg'\nimport { ReactComponent as Hairstyle2 } from '../../icon/Learn2Message/hairstyle2.svg'\nimport { ReactComponent as Moustache } from '../../icon/Learn2Message/moustache.svg'\n\nconst MessageChildBox = props => {\n  const [edit, setEdit] = useState(false)\n  const [cmsgContent, setCMsgContent] = useState(props.cContent)\n\n  // 資料處理\n  // 直接把redux的store用變數裝 方便使用\n  let reduxData = props.cmsgs\n  // 然後跟傳進來id做比對進而拿到母messageBox的redux資料\n  let thisData = reduxData.filter(el => el.cId === props.cId)\n  let thisDataNA = thisData[0] ? thisData[0] : thisData\n\n  // 按讚跟噓 完成\n  // 這層直接跟redux溝通\n  const cAweClick = () => {\n    // 把他的awesome++\n    thisDataNA.cAwesome++\n    props.putAweCMSGAsync(thisDataNA)\n  }\n  const cBooClick = () => {\n    thisDataNA.cBoo++\n    props.putBooCMSGAsync(thisDataNA)\n  }\n\n  // 子留言刪除 完成\n  const delClick = () => {\n    let box = document.getElementById('box' + props.cId)\n    box.classList.add('Out')\n    setTimeout(() => {\n      props.delCMSGAsync(thisDataNA.cId)\n    }, 1000)\n  }\n\n  const messageViewEditChange = event => {\n    setCMsgContent(event.target.value)\n  }\n  const editClick = () => {\n    if (edit === true) {\n      let newText = document.getElementById('editContentTextarea' + props.cId)\n      thisDataNA.cContent = newText.value\n      props.putContentCMSGAsync(thisDataNA)\n      setEdit(false)\n    } else {\n      // let editArea = document.getElementById('editContent' + props.id)\n      setEdit(true)\n    }\n  }\n  const messageViewEditButtonSave = () => {\n    let newText = document.getElementById('editContentTextarea' + props.cId)\n    thisDataNA.cContent = newText.value\n    props.putContentCMSGAsync(thisDataNA)\n    setEdit(false)\n  }\n\n  // Hover\n  const aweMouseOver = () => {\n    let changeArea = document.getElementById('awe' + props.cId)\n    changeArea.classList.add('aweOver')\n  }\n  const aweMouseOut = () => {\n    let changeArea = document.getElementById('awe' + props.cId)\n    changeArea.classList.remove('aweOver')\n  }\n  const booMouseOver = () => {\n    let changeArea = document.getElementById('boo' + props.cId)\n    changeArea.classList.add('booOver')\n  }\n  const booMouseOut = () => {\n    let changeArea = document.getElementById('boo' + props.cId)\n    changeArea.classList.remove('booOver')\n  }\n  const messageViewEditButtonOver = () => {\n    let editContentBtn = document.getElementById('editContentBtn' + props.cId)\n    editContentBtn.classList.add('Over')\n  }\n  const messageViewEditButtonOut = () => {\n    let editContentBtn = document.getElementById('editContentBtn' + props.cId)\n    editContentBtn.classList.remove('Over')\n  }\n  const delMouseOver = () => {\n    let changeArea = document.getElementById('delIcon' + props.cId)\n    changeArea.classList.add('Over')\n  }\n  const delMouseOut = () => {\n    let changeArea = document.getElementById('delIcon' + props.cId)\n    changeArea.classList.remove('Over')\n  }\n  const editMouseOver = () => {\n    let changeArea = document.getElementById('editIcon' + props.cId)\n    changeArea.classList.add('Over')\n  }\n  const editMouseOut = () => {\n    let changeArea = document.getElementById('editIcon' + props.cId)\n    changeArea.classList.remove('Over')\n  }\n\n  // 大專寫的時間換算\n  const nowTime = +new Date()\n  const messageTime = props.cTime\n  let time = nowTime - messageTime\n  let secondnumber = time / 1000\n  let minutenumber = time / 60000\n  let daynumber = time / 86400000\n  let monthnumber = time / 2592000000\n  let yearnumber = time / 31104000000\n  // 秒\n  let second = Math.floor(secondnumber % 60)\n  // 分鐘\n  let minute = minutenumber % 60 >= 1 ? Math.floor(minutenumber % 60) : ''\n  // 小時\n  let hour = minutenumber / 60 >= 1 ? Math.floor(minutenumber / 60) : ''\n  // 天\n  let day = daynumber % 30 >= 1 ? Math.floor(daynumber % 30) : ''\n  // 月\n  let month = monthnumber % 12 >= 1 ? Math.floor(monthnumber % 12) : ''\n  // 年\n  let year = yearnumber >= 1 ? Math.floor(yearnumber) : ''\n  let showTimeText =\n    year >= 1 && month >= 1\n      ? year + '年' + month + '個月'\n      : year >= 1\n      ? year + '年'\n      : month >= 1\n      ? month + '個月'\n      : day >= 1\n      ? day + '天'\n      : hour >= 1\n      ? hour + '小時'\n      : minute >= 1\n      ? minute + '分鐘'\n      : second + '秒'\n\n  return (\n    <>\n      <div id={'box' + props.cId} className=\"messageViewBoxFeedback\">\n        <div className=\"messageViewBoxLeft\">\n          <div className=\"messageViewAvatar\">\n            {props.cAvatar === 'Beard' ? (\n              <Beard alt=\"logo\" width=\"50px\" height=\"50px\" />\n            ) : props.cAvatar === 'Hair' ? (\n              <Hair alt=\"logo\" width=\"50px\" height=\"50px\" />\n            ) : props.cAvatar === 'Hairstyle' ? (\n              <Hairstyle alt=\"logo\" width=\"50px\" height=\"50px\" />\n            ) : props.cAvatar === 'Hairstyle2' ? (\n              <Hairstyle2 alt=\"logo\" width=\"50px\" height=\"50px\" />\n            ) : (\n              <Moustache alt=\"logo\" width=\"50px\" height=\"50px\" />\n            )}\n          </div>\n          <div className=\"messageViewABB\">\n            <div className=\"aweBooBox\">\n              <div id={'awe' + props.cId} className=\"messageViewAweOrNot\">\n                <i className=\"fas fa-thumbs-up\" />\n                {props.cAwesome}\n              </div>\n              <div\n                className=\"fakeArea\"\n                onClick={cAweClick}\n                onMouseOver={aweMouseOver}\n                onMouseOut={aweMouseOut}\n              />\n            </div>\n            <div className=\"aweBooBox\">\n              <div id={'boo' + props.cId} className=\"messageViewAweOrNot\">\n                <i className=\"fas fa-thumbs-down\" />\n                {props.cBoo}\n              </div>\n              <div\n                className=\"fakeArea\"\n                onClick={cBooClick}\n                onMouseOver={booMouseOver}\n                onMouseOut={booMouseOut}\n              />\n            </div>\n          </div>\n        </div>\n        <ul className=\"messageViewBoxUL\">\n          <li className=\"ff1 font5 fc1\">\n            {props.cName}\n            <small style={{ marginLeft: '2px', color: '#999' }}>\n              {props.cCompany}\n            </small>\n          </li>\n          {edit === true ? (\n            <div className=\"messageViewEditIng add\">\n              <li\n                id={'editContent' + props.cId}\n                className=\"ff1 font5 fc3 messageViewBoxContent\"\n                style={{ width: '92%' }}\n              >\n                <textarea\n                  id={'editContentTextarea' + props.cId}\n                  onChange={messageViewEditChange}\n                  value={cmsgContent}\n                  style={{\n                    border: 'none',\n                    boxShadow: 'none',\n                    width: '100%',\n                    height: '100%',\n                  }}\n                />\n              </li>\n              <div\n                id={'editContentBtn' + props.cId}\n                className=\"messageViewEditButton\"\n                onClick={messageViewEditButtonSave}\n                onMouseOver={messageViewEditButtonOver}\n                onMouseOut={messageViewEditButtonOut}\n              >\n                <i className=\"far fa-paper-plane\" />\n              </div>\n            </div>\n          ) : (\n            <div className=\"messageViewEditIng\">\n              <li className=\"ff1 font5 fc3 messageViewBoxContent\">\n                {props.cContent}\n              </li>\n            </div>\n          )}\n          <li className=\"ff1 font6 fc3 messageViewBoxTime\">\n            <p>{showTimeText}前</p>\n          </li>\n        </ul>\n        <div className=\"cMessageViewEditDelArea\">\n          <div\n            id={'delIcon' + props.cId}\n            className=\"cMessageViewDelBox\"\n            onClick={delClick}\n            onMouseOver={delMouseOver}\n            onMouseOut={delMouseOut}\n          >\n            <i className=\"fas fa-trash\" />\n          </div>\n          <div\n            id={'editIcon' + props.cId}\n            className=\"cMessageViewEditBox\"\n            onClick={editClick}\n            onMouseOver={editMouseOver}\n            onMouseOut={editMouseOut}\n          >\n            <i className=\"fas fa-edit\" />\n          </div>\n        </div>\n      </div>\n    </>\n  )\n}\n\n// 綁定 redux store\n// 綁定 props.msgs <=> store.msgs\nconst mapStateToProps = store => ({ msgs: store.msgs, cmsgs: store.cmsgs })\n\n// 綁定 redux dispatch\n// 第3種，: redux(state)綁定到此元件的props、部份綁定action creator\n// 這個action creator就是上面引入的那個\nconst mapDispatchToProps = dispatch =>\n  bindActionCreators(\n    {\n      putMSG,\n      delMSG,\n      putCMSG,\n      putAweCMSGAsync,\n      putBooCMSGAsync,\n      putContentCMSGAsync,\n      delCMSGAsync,\n    },\n    dispatch\n  )\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(MessageChildBox)\n"]},"metadata":{},"sourceType":"module"}